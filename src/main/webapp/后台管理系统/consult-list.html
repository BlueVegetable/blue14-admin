<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>
            咨询列表
        </title>
        <meta name="renderer" content="webkit">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="format-detection" content="telephone=no">
        <link rel="stylesheet" href="./layui/css/layui.css"  media="all">
        <script src="./js/url.js" charset="utf-8"></script>
    </head>
    <body>
        <div class="x-nav">
            <span class="layui-breadcrumb">
              <a><cite>首页</cite></a>
              <a><cite>咨询管理</cite></a>
              <a><cite>咨询列表</cite></a>
            </span>
        </div>
        <div class="x-body">
            <table class="layui-hide" id="consult-list" lay-filter="demo"></table>
        </div>
        <script src="./layui/layui.js" charset="utf-8"></script>
        <script type="text/html" id="bar">
            <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">查看</a>
            <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
            <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
        </script>
        <script>
            layui.use(['element','layer','table'], function(){
                var table = layui.table;

                table.render({
                    elem: '#consult-list'
                    ,url:remoteURL+"/Consult/getConsults.do"
                    ,page:true
                    ,cols: [[
                        {type:'checkbox',fixed:'center'}
                        ,{field:'id', width:100, title: '咨询单ID', sort: true}
                        ,{field:'name', width:150, title: '咨询者名字'}
                        ,{field:'remark', title: '咨询内容'}
                        ,{field:'phoneNumber', width:150, title: '手机号码'}
                        ,{fixed: 'right', width:178, align:'center', toolbar: '#bar',title:'操作'}
                    ]]
                    ,limits:['10']
                });

                table.on('checkbox(demo)', function(obj){
                    console.log(obj)
                });

                //监听工具条
                table.on('tool(demo)', function(obj){
                    var data = obj.data;
                    if(obj.event === 'detail'){
                        layer.msg('ID：'+ data.id + ' 的查看操作');
                    } else if(obj.event === 'del'){
                        layer.confirm('真的删除行么', function(index){
                            obj.del();
                            layer.close(index);
                        });
                    } else if(obj.event === 'edit'){
                        layer.alert('编辑行：<br>'+ JSON.stringify(data))
                    }
                });

                var $ = layui.$, active = {
                    getCheckData: function(){ //获取选中数据
                        var checkStatus = table.checkStatus('idTest')
                            ,data = checkStatus.data;
                        layer.alert(JSON.stringify(data));
                    }
                    ,getCheckLength: function(){ //获取选中数目
                        var checkStatus = table.checkStatus('idTest')
                            ,data = checkStatus.data;
                        layer.msg('选中了：'+ data.length + ' 个');
                    }
                    ,isAll: function(){ //验证是否全选
                        var checkStatus = table.checkStatus('idTest');
                        layer.msg(checkStatus.isAll ? '全选': '未全选')
                    }
                };

                $('.demoTable .layui-btn').on('click', function(){
                    var type = $(this).data('type');
                    active[type] ? active[type].call(this) : '';
                });
            });
        </script>
    </body>
</html>